{"version":3,"sources":["pages/Game/Nipple/index.js","pages/Game/Nipple/styles.module.scss"],"names":["Matter","use","Engine","RenderDom","DomBodies","World","Constraint","Mouse","Events","DomBody","Render","scratching","Nipple","onDone","scratches","useEffect","document","body","style","overflow","cw","clientWidth","ch","clientHeight","scratchesCount","done","engine","create","render","stop","DebugRender","canvas","remove","mapping","ratioMultiplier","element","ctrX","ctrY","nippleSize","querySelector","backNippleOptions","isSensor","isStatic","Dom","backNipple","polygon","nippleBaseOptions","nippleBase","fingerOptions","density","finger","nippleBodyOptions","nippleBody","nippleOptions","nipple","nippleTopOptions","nippleTop","elastic","pointA","x","y","bodyB","stiffness","elastic2","bodyA","mouse","container","on","position","width","Math","max","abs","height","dist","sqrt","pow","children","setAttribute","speed","angle","atan2","setAngle","setPosition","add","world","run","clear","context","textures","id","className","css","background","borderRadius","transform","module","exports"],"mappings":"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","file":"static/js/12.10e97b26.chunk.js","sourcesContent":["import React, { useEffect } from \"react\"\nimport css from \"./styles.module.scss\"\nimport Matter from \"matter-js\"\nimport \"matter-dom-plugin\"\nMatter.use(\"matter-dom-plugin\")\n\nconst { Engine, RenderDom, DomBodies, World, Constraint, Mouse, Events, DomBody, Render } = Matter\n\nlet scratching = false\n\nfunction Nipple({ onDone, scratches = 50 }) {\n  useEffect(() => {\n    document.body.style.overflow = \"hidden\"\n    const cw = document.body.clientWidth\n    const ch = document.body.clientHeight\n    let scratchesCount = 0\n    let done = false\n    const engine = Engine.create()\n    const render = RenderDom.create({ engine })\n    Render.stop(render.DebugRender)\n    render.DebugRender.canvas.remove()\n\n    render.mapping.ratioMultiplier = 1\n\n    const ctrX = cw / 2\n    const ctrY = ch / 2\n\n    const nippleSize = 30\n    var element\n\n    element = document.querySelector(\"#backNipple\")\n    const backNippleOptions = { isSensor: true, isStatic: true, Dom: { render, element } }\n    var backNipple = DomBodies.polygon(ctrX, ctrY, 12, nippleSize * 4, backNippleOptions)\n\n    element = document.querySelector(\"#nippleBase\")\n    var nippleBaseOptions = { isSensor: true, isStatic: true, Dom: { render, element } }\n    var nippleBase = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleBaseOptions)\n\n    element = document.querySelector(\"#finger\")\n    const fingerOptions = { density: 0.02, isStatic: true, Dom: { render, element } }\n    var finger = DomBodies.polygon(0, 0, 4, nippleSize, fingerOptions)\n\n    element = document.querySelector(\"#nippleBody\")\n    var nippleBodyOptions = { isSensor: true, isStatic: true, Dom: { render, element } }\n    var nippleBody = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleBodyOptions)\n\n    element = document.querySelector(\"#nipple\")\n    var nippleOptions = { density: 0.004, Dom: { render, element } }\n    var nipple = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleOptions)\n\n    element = document.querySelector(\"#nippleTop\")\n    var nippleTopOptions = { density: 0.004, isSensor: true, Dom: { render, element } }\n    var nippleTop = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleTopOptions)\n\n    var elastic = Constraint.create({ pointA: { x: ctrX, y: ctrY }, bodyB: nipple, stiffness: 0.1 })\n    var elastic2 = Constraint.create({ bodyA: nipple, bodyB: nippleTop, stiffness: 0.1 })\n\n    // add mouse control\n    var mouse = Mouse.create(document.body)\n\n    var container = document.querySelector(\"#container\")\n    Events.on(engine, \"afterUpdate\", function () {\n      if (!mouse.position.x) {\n        return\n      }\n\n      //   nipple.Dom.element.style.opacity = nipple.velocity.x * 10\n      nipple.Dom.element.style.width = 50 + 50 * Math.max(0, 1 - Math.abs(ctrX - nipple.position.x) / 100) + \"px\"\n      nipple.Dom.element.style.height = 50 + 50 * Math.max(0, 1 - Math.abs(ctrY - nipple.position.y) / 100) + \"px\"\n      nippleTop.Dom.element.style.height = 30 + 30 * Math.max(0, 1 - Math.abs(ctrY - nippleTop.position.y) / 100) + \"px\"\n      nippleTop.Dom.element.style.width = 30 + 30 * Math.max(0, 1 - Math.abs(ctrX - nippleTop.position.x) / 100) + \"px\"\n      const dist = Math.sqrt(Math.pow(ctrX - nippleTop.position.x, 2) + Math.pow(ctrY - nippleTop.position.y, 2))\n      nippleBody.Dom.element.children[0].style.height = dist + \"px\"\n\n      container.setAttribute(\"fast\", nipple.speed > 3)\n      container.setAttribute(\"stretched\", dist > 40)\n\n      if (nipple.speed > 3) {\n        if (!scratching) {\n          scratching = true\n          scratchesCount++\n        }\n      } else {\n        scratching = false\n      }\n\n      if (scratchesCount >= scratches && !done) {\n        done = true\n        onDone()\n      }\n\n      const angle = -Math.atan2(ctrX - nippleTop.position.x, ctrY - nippleTop.position.y)\n      DomBody.setAngle(nipple, angle)\n      DomBody.setAngle(nippleTop, angle)\n      DomBody.setAngle(nippleBody, angle)\n      DomBody.setPosition(finger, {\n        x: mouse.position.x,\n        y: mouse.position.y,\n      })\n    })\n\n    // keep the mouse in sync with rendering\n    render.mouse = mouse\n\n    World.add(engine.world, [backNipple, nippleBase, nippleBody, nipple, nippleTop, elastic, elastic2, finger])\n\n    Engine.run(engine)\n    RenderDom.run(render)\n\n    return () => {\n      document.body.style.overflow = \"\"\n      RenderDom.stop(render)\n      World.clear(engine.world)\n      Engine.clear(engine)\n      render.canvas = null\n      render.context = null\n      render.textures = {}\n    }\n  }, [onDone, scratches])\n\n  return (\n    <div id=\"container\" className={css.container} style={{ background: \"rgb(255, 236, 216)\", height: \"100vh\", width: \"100vw\" }}>\n      <div id=\"debug\"></div>\n      <div id=\"finger\"></div>\n      <div id=\"backNipple\" className={css.backNipple} style={{ borderRadius: \"100%\", background: \"#FFD8D8\", width: \"200px\", height: \"200px\" }}></div>\n      <div id=\"nippleBase\" className={css.nippleBase} style={{ borderRadius: \"100%\", background: \"#ffbfbf\", width: \"100px\", height: \"100px\" }}></div>\n      <div id=\"nippleBody\">\n        <div\n          className={css.nippleBody}\n          style={{ borderRadius: \"10px\", transform: \"translate(0, -50%)\", background: \"linear-gradient(180deg, #ffbfbf 0%, rgb(255, 176, 176) 10%,#ffbfbf 100%)\", width: \"50px\", height: \"0\" }}\n        ></div>\n      </div>\n      <div id=\"nipple\" className={css.nipple} style={{ borderRadius: \"100%\", width: \"100px\", height: \"100px\" }}></div>\n      <div id=\"nippleTop\" className={css.nippleTop}></div>\n    </div>\n  )\n}\n\nexport default Nipple\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nippleTop\":\"styles_nippleTop__izCCc\",\"nipple\":\"styles_nipple__T5lSo\",\"container\":\"styles_container__WzJvj\",\"nippleBase\":\"styles_nippleBase__12u59\",\"backNipple\":\"styles_backNipple__3c-Bd\"};"],"sourceRoot":""}