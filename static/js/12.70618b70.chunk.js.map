{"version":3,"sources":["pages/Game/Nipple/index.js","pages/Game/Nipple/styles.module.scss"],"names":["Matter","use","Engine","RenderDom","DomBodies","World","Constraint","Mouse","Events","DomBody","Render","scratching","Nipple","onDone","scratches","useEffect","document","body","style","overflow","cw","clientWidth","ch","clientHeight","scratchesCount","engine","create","render","stop","DebugRender","canvas","remove","mapping","ratioMultiplier","element","ctrX","ctrY","nippleSize","querySelector","backNippleOptions","isSensor","isStatic","Dom","backNipple","polygon","nippleBaseOptions","nippleBase","fingerOptions","density","finger","nippleBodyOptions","nippleBody","nippleOptions","nipple","nippleTopOptions","nippleTop","elastic","pointA","x","y","bodyB","stiffness","elastic2","bodyA","mouse","container","on","position","width","Math","max","abs","height","dist","sqrt","pow","children","setAttribute","speed","console","log","setAngle","angle","atan2","setPosition","add","world","run","clear","context","textures","id","className","css","background","borderRadius","transform","module","exports"],"mappings":"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","file":"static/js/12.70618b70.chunk.js","sourcesContent":["import React, { useEffect } from \"react\"\nimport css from \"./styles.module.scss\"\nimport Matter from \"matter-js\"\nimport \"matter-dom-plugin\"\nMatter.use(\"matter-dom-plugin\")\n\nconst { Engine, RenderDom, DomBodies, World, Constraint, Mouse, Events, DomBody, Render } = Matter\n\nlet scratching = false\n\nfunction Nipple({ onDone, scratches = 50 }) {\n  useEffect(() => {\n    document.body.style.overflow = \"hidden\"\n    const cw = document.body.clientWidth\n    const ch = document.body.clientHeight\n    let scratchesCount = 0\n    const engine = Engine.create()\n    const render = RenderDom.create({ engine })\n    Render.stop(render.DebugRender)\n    render.DebugRender.canvas.remove()\n\n    render.mapping.ratioMultiplier = 1\n\n    const ctrX = cw / 2\n    const ctrY = ch / 2\n\n    const nippleSize = 30\n    var element\n\n    element = document.querySelector(\"#backNipple\")\n    const backNippleOptions = { isSensor: true, isStatic: true, Dom: { render, element } }\n    var backNipple = DomBodies.polygon(ctrX, ctrY, 12, nippleSize * 4, backNippleOptions)\n\n    element = document.querySelector(\"#nippleBase\")\n    var nippleBaseOptions = { isSensor: true, isStatic: true, Dom: { render, element } }\n    var nippleBase = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleBaseOptions)\n\n    element = document.querySelector(\"#finger\")\n    const fingerOptions = { density: 0.02, isStatic: true, Dom: { render, element } }\n    var finger = DomBodies.polygon(0, 0, 4, nippleSize, fingerOptions)\n\n    element = document.querySelector(\"#nippleBody\")\n    var nippleBodyOptions = { isSensor: true, isStatic: true, Dom: { render, element } }\n    var nippleBody = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleBodyOptions)\n\n    element = document.querySelector(\"#nipple\")\n    var nippleOptions = { density: 0.004, Dom: { render, element } }\n    var nipple = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleOptions)\n\n    element = document.querySelector(\"#nippleTop\")\n    var nippleTopOptions = { density: 0.004, isSensor: true, Dom: { render, element } }\n    var nippleTop = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleTopOptions)\n\n    var elastic = Constraint.create({ pointA: { x: ctrX, y: ctrY }, bodyB: nipple, stiffness: 0.02 })\n    var elastic2 = Constraint.create({ bodyA: nipple, bodyB: nippleTop, stiffness: 0.1 })\n\n    // add mouse control\n    var mouse = Mouse.create(document.body)\n\n    var container = document.querySelector(\"#container\")\n    Events.on(engine, \"afterUpdate\", function () {\n      if (!mouse.position.x) {\n        return\n      }\n\n      //   nipple.Dom.element.style.opacity = nipple.velocity.x * 10\n      nipple.Dom.element.style.width = 50 + 50 * Math.max(0, 1 - Math.abs(ctrX - nipple.position.x) / 100) + \"px\"\n      nipple.Dom.element.style.height = 50 + 50 * Math.max(0, 1 - Math.abs(ctrY - nipple.position.y) / 100) + \"px\"\n      nippleTop.Dom.element.style.height = 30 + 30 * Math.max(0, 1 - Math.abs(ctrY - nippleTop.position.y) / 100) + \"px\"\n      nippleTop.Dom.element.style.width = 30 + 30 * Math.max(0, 1 - Math.abs(ctrX - nippleTop.position.x) / 100) + \"px\"\n      const dist = Math.sqrt(Math.pow(ctrX - nippleTop.position.x, 2) + Math.pow(ctrY - nippleTop.position.y, 2))\n      nippleBody.Dom.element.children[0].style.height = dist + \"px\"\n\n      container.setAttribute(\"fast\", nipple.speed > 5)\n      container.setAttribute(\"stretched\", dist > 80)\n\n      if (nipple.speed > 5) {\n        if (!scratching) {\n          scratching = true\n          scratchesCount++\n          console.log(\"scratch!\")\n        }\n      } else {\n        scratching = false\n      }\n\n      if (scratchesCount >= scratches) {\n        onDone()\n      }\n\n      DomBody.setAngle(nippleTop, nipple.angle)\n      DomBody.setAngle(nippleBody, -Math.atan2(ctrX - nippleTop.position.x, ctrY - nippleTop.position.y))\n      DomBody.setPosition(finger, {\n        x: mouse.position.x,\n        y: mouse.position.y,\n      })\n    })\n\n    // keep the mouse in sync with rendering\n    render.mouse = mouse\n\n    World.add(engine.world, [backNipple, nippleBase, nippleBody, nipple, nippleTop, elastic, elastic2, finger])\n\n    Engine.run(engine)\n    RenderDom.run(render)\n\n    return () => {\n      document.body.style.overflow = \"\"\n      RenderDom.stop(render)\n      World.clear(engine.world)\n      Engine.clear(engine)\n      render.canvas = null\n      render.context = null\n      render.textures = {}\n    }\n  }, [onDone, scratches])\n\n  return (\n    <div id=\"container\" className={css.container} style={{ background: \"rgb(255, 236, 216)\", height: \"100vh\", width: \"100vw\" }}>\n      <div id=\"debug\"></div>\n      <div id=\"finger\"></div>\n      <div id=\"backNipple\" className={css.backNipple} style={{ borderRadius: \"100%\", background: \"#FFD8D8\", width: \"200px\", height: \"200px\" }}></div>\n      <div id=\"nippleBase\" className={css.nippleBase} style={{ borderRadius: \"100%\", background: \"#ffbfbf\", width: \"100px\", height: \"100px\" }}></div>\n      <div id=\"nippleBody\">\n        <div\n          className={css.nippleBody}\n          style={{ borderRadius: \"10px\", transform: \"translate(0, -50%)\", background: \"linear-gradient(180deg, #ffbfbf 0%, rgb(255, 176, 176) 10%,#ffbfbf 100%)\", width: \"50px\", height: \"0\" }}\n        ></div>\n      </div>\n      <div id=\"nipple\" className={css.nipple} style={{ borderRadius: \"100%\", width: \"100px\", height: \"100px\" }}></div>\n      <div id=\"nippleTop\" className={css.nippleTop}></div>\n    </div>\n  )\n}\n\nexport default Nipple\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nippleTop\":\"styles_nippleTop__izCCc\",\"nipple\":\"styles_nipple__T5lSo\",\"container\":\"styles_container__WzJvj\",\"nippleBase\":\"styles_nippleBase__12u59\",\"backNipple\":\"styles_backNipple__3c-Bd\"};"],"sourceRoot":""}