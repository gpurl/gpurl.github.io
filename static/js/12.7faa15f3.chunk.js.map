{"version":3,"sources":["pages/Game/Nipple/index.js","pages/Game/Nipple/styles.module.scss"],"names":["Matter","use","Engine","RenderDom","DomBodies","World","Constraint","Mouse","Events","DomBody","Render","Nipple","props","useEffect","document","body","style","overflow","cw","clientWidth","ch","clientHeight","engine","create","render","stop","DebugRender","canvas","remove","mapping","ratioMultiplier","element","ctrX","ctrY","nippleSize","querySelector","backNippleOptions","isSensor","isStatic","Dom","backNipple","polygon","nippleBaseOptions","nippleBase","fingerOptions","density","finger","nippleBodyOptions","nippleBody","nippleOptions","nipple","nippleTopOptions","nippleTop","elastic","pointA","x","y","bodyB","stiffness","elastic2","bodyA","mouse","on","position","width","Math","max","abs","height","dist","sqrt","pow","children","setAngle","angle","atan2","setPosition","add","world","run","clear","context","textures","background","id","className","css","borderRadius","transform","module","exports"],"mappings":"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","file":"static/js/12.7faa15f3.chunk.js","sourcesContent":["import React, { useEffect } from \"react\"\nimport css from \"./styles.module.scss\"\nimport Matter from \"matter-js\"\nimport \"matter-dom-plugin\"\nMatter.use(\"matter-dom-plugin\")\n\nconst { Engine, RenderDom, DomBodies, World, Constraint, Mouse, Events, DomBody, Render } = Matter\n\nfunction Nipple(props) {\n  useEffect(() => {\n    document.body.style.overflow = \"hidden\"\n    const cw = document.body.clientWidth\n    const ch = document.body.clientHeight\n\n    const engine = Engine.create()\n    const render = RenderDom.create({ engine })\n    Render.stop(render.DebugRender)\n    render.DebugRender.canvas.remove()\n\n    render.mapping.ratioMultiplier = 1\n\n    const ctrX = cw / 2\n    const ctrY = ch / 2\n\n    const nippleSize = 30\n    var element\n\n    element = document.querySelector(\"#backNipple\")\n    const backNippleOptions = { isSensor: true, isStatic: true, Dom: { render, element } }\n    var backNipple = DomBodies.polygon(ctrX, ctrY, 12, nippleSize * 4, backNippleOptions)\n\n    element = document.querySelector(\"#nippleBase\")\n    var nippleBaseOptions = { isSensor: true, isStatic: true, Dom: { render, element } }\n    var nippleBase = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleBaseOptions)\n\n    element = document.querySelector(\"#finger\")\n    const fingerOptions = { density: 0.02, isStatic: true, Dom: { render, element } }\n    var finger = DomBodies.polygon(0, 0, 8, nippleSize, fingerOptions)\n\n    element = document.querySelector(\"#nippleBody\")\n    var nippleBodyOptions = { isSensor: true, isStatic: true, Dom: { render, element } }\n    var nippleBody = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleBodyOptions)\n\n    element = document.querySelector(\"#nipple\")\n    var nippleOptions = { density: 0.004, Dom: { render, element } }\n    var nipple = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleOptions)\n\n    element = document.querySelector(\"#nippleTop\")\n    var nippleTopOptions = { density: 0.004, isSensor: true, Dom: { render, element } }\n    var nippleTop = DomBodies.polygon(ctrX, ctrY, 8, nippleSize, nippleTopOptions)\n\n    var elastic = Constraint.create({ pointA: { x: ctrX, y: ctrY }, bodyB: nipple, stiffness: 0.02 })\n    var elastic2 = Constraint.create({ bodyA: nipple, bodyB: nippleTop, stiffness: 0.04 })\n\n    // add mouse control\n    var mouse = Mouse.create(document.body)\n\n    Events.on(engine, \"afterUpdate\", function () {\n      if (!mouse.position.x) {\n        return\n      }\n\n      //   nipple.Dom.element.style.opacity = nipple.velocity.x * 10\n      nipple.Dom.element.style.width = 50 + 50 * Math.max(0, 1 - Math.abs(ctrX - nipple.position.x) / 100) + \"px\"\n      nipple.Dom.element.style.height = 50 + 50 * Math.max(0, 1 - Math.abs(ctrY - nipple.position.y) / 100) + \"px\"\n      nippleTop.Dom.element.style.height = 30 + 30 * Math.max(0, 1 - Math.abs(ctrY - nippleTop.position.y) / 100) + \"px\"\n      nippleTop.Dom.element.style.width = 30 + 30 * Math.max(0, 1 - Math.abs(ctrX - nippleTop.position.x) / 100) + \"px\"\n      const dist = Math.sqrt(Math.pow(ctrX - nippleTop.position.x, 2) + Math.pow(ctrY - nippleTop.position.y, 2))\n      nippleBody.Dom.element.children[0].style.height = dist + \"px\"\n\n      DomBody.setAngle(nippleTop, nipple.angle)\n      DomBody.setAngle(nippleBody, -Math.atan2(ctrX - nippleTop.position.x, ctrY - nippleTop.position.y))\n      DomBody.setPosition(finger, {\n        x: mouse.position.x,\n        y: mouse.position.y,\n      })\n    })\n\n    // keep the mouse in sync with rendering\n    render.mouse = mouse\n\n    World.add(engine.world, [backNipple, nippleBase, nippleBody, nipple, nippleTop, elastic, elastic2, finger])\n\n    Engine.run(engine)\n    RenderDom.run(render)\n\n    return () => {\n      document.body.style.overflow = \"\"\n      RenderDom.stop(render)\n      World.clear(engine.world)\n      Engine.clear(engine)\n      render.canvas = null\n      render.context = null\n      render.textures = {}\n    }\n  }, [])\n\n  return (\n    <div style={{ background: \"rgb(255, 236, 216)\", height: \"100vh\", width: \"100vw\" }}>\n      <div id=\"debug\"></div>\n      <div id=\"finger\"></div>\n      <div id=\"backNipple\" className={css.backNipple} style={{ borderRadius: \"100%\", background: \"#FFD8D8\", width: \"200px\", height: \"200px\" }}></div>\n      <div id=\"nippleBase\" className={css.nippleBase} style={{ borderRadius: \"100%\", background: \"#ffbfbf\", width: \"100px\", height: \"100px\" }}></div>\n      <div id=\"nippleBody\">\n        <div className={css.nippleBody} style={{ borderRadius: \"10px\", transform: \"translate(0, -50%)\", background: \"linear-gradient(180deg, #ffbfbf 0%, rgb(255, 176, 176) 10%,#ffbfbf 100%)\", width: \"50px\", height: \"0\" }}></div>\n      </div>\n      <div id=\"nipple\" className={css.nipple} style={{ borderRadius: \"100%\", background: \"#ffbfbf\", width: \"100px\", height: \"100px\" }}></div>\n      <div id=\"nippleTop\" className={css.nippleTop}></div>\n    </div>\n  )\n}\n\nexport default Nipple\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nippleTop\":\"styles_nippleTop__izCCc\",\"nippleBase\":\"styles_nippleBase__12u59\",\"backNipple\":\"styles_backNipple__3c-Bd\"};"],"sourceRoot":""}